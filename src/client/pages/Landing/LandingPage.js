import React, { useState } from "react";
import { useHistory } from "react-router-dom";
import axios from "axios";
import "./css/landing.scss";

const LandingPage = () => {
  const history = useHistory();
  const [username, setUsername] = useState("");
  const [password, setPassword] = useState("");
  const [errorMsg, setErrorMsg] = useState("");

  function login(event) {
    event.preventDefault();
    axios
      .post(`${process.env.BACKEND_HOST}/login`, { username, password })
      .then(
        (res) => {
          if (res.data == true) {
            window.$authenticated = true;
            history.push({
              pathname: "/menu",
            });
          } else {
            setErrorMsg("Invalid Credentials.");
          }
        },
        (error) => {
          setErrorMsg("An error has occured. Please try again");
        }
      );
  }

  return (
    <div className="landing-page">
      {errorMsg != "" ? <p className="error-msg">{errorMsg}</p> : <div></div>}
      <div className="container">
        <div className="logo">
          <svg
            viewBox="0 0 245 81"
            fill="none"
            xmlns="http://www.w3.org/2000/svg"
          >
            <path
              d="M90.2191 21.182H92.2877C94.3149 21.182 95.8113 20.8441 96.7766 20.1684C97.742 19.4926 98.2247 18.4307 98.2247 16.9827C98.2247 15.5484 97.7282 14.5279 96.7352 13.9211C95.7561 13.3143 94.2322 13.0109 92.1636 13.0109H90.2191V21.182ZM90.2191 26.395V38H83.8063V7.75657H92.6187C96.7284 7.75657 99.7692 8.50818 101.741 10.0114C103.713 11.5008 104.699 13.7694 104.699 16.8172C104.699 18.5962 104.21 20.1822 103.231 21.575C102.252 22.9541 100.866 24.0367 99.0728 24.8228C103.624 31.6217 106.589 36.0141 107.968 38H100.852L93.6323 26.395H90.2191ZM116.305 26.395C116.305 28.6843 116.677 30.415 117.422 31.5872C118.18 32.7595 119.407 33.3456 121.104 33.3456C122.786 33.3456 123.993 32.7664 124.724 31.6079C125.469 30.4357 125.841 28.698 125.841 26.395C125.841 24.1057 125.469 22.3887 124.724 21.2441C123.979 20.0994 122.759 19.5271 121.062 19.5271C119.38 19.5271 118.166 20.0994 117.422 21.2441C116.677 22.3749 116.305 24.0919 116.305 26.395ZM132.295 26.395C132.295 30.1599 131.302 33.1042 129.316 35.228C127.33 37.3518 124.565 38.4137 121.021 38.4137C118.801 38.4137 116.842 37.931 115.146 36.9657C113.45 35.9865 112.147 34.5868 111.236 32.7664C110.326 30.946 109.871 28.8222 109.871 26.395C109.871 22.6163 110.857 19.6788 112.829 17.5826C114.801 15.4864 117.573 14.4383 121.145 14.4383C123.365 14.4383 125.324 14.9209 127.02 15.8863C128.716 16.8517 130.02 18.2377 130.93 20.0443C131.84 21.8509 132.295 23.9678 132.295 26.395ZM142.535 26.395C142.535 28.6843 142.907 30.415 143.652 31.5872C144.41 32.7595 145.638 33.3456 147.334 33.3456C149.017 33.3456 150.223 32.7664 150.954 31.6079C151.699 30.4357 152.071 28.698 152.071 26.395C152.071 24.1057 151.699 22.3887 150.954 21.2441C150.209 20.0994 148.989 19.5271 147.293 19.5271C145.61 19.5271 144.397 20.0994 143.652 21.2441C142.907 22.3749 142.535 24.0919 142.535 26.395ZM158.525 26.395C158.525 30.1599 157.532 33.1042 155.547 35.228C153.561 37.3518 150.796 38.4137 147.251 38.4137C145.031 38.4137 143.073 37.931 141.376 36.9657C139.68 35.9865 138.377 34.5868 137.467 32.7664C136.556 30.946 136.101 28.8222 136.101 26.395C136.101 22.6163 137.087 19.6788 139.06 17.5826C141.032 15.4864 143.804 14.4383 147.375 14.4383C149.596 14.4383 151.554 14.9209 153.25 15.8863C154.947 16.8517 156.25 18.2377 157.16 20.0443C158.07 21.8509 158.525 23.9678 158.525 26.395ZM184.445 38H178.136V24.4918C178.136 22.8231 177.853 21.575 177.288 20.7476C176.736 19.9063 175.86 19.4857 174.661 19.4857C173.047 19.4857 171.875 20.0787 171.144 21.2648C170.413 22.4508 170.048 24.4022 170.048 27.119V38H163.738V14.8727H168.558L169.406 17.8308H169.758C170.379 16.7689 171.275 15.9415 172.447 15.3485C173.619 14.7417 174.964 14.4383 176.481 14.4383C179.943 14.4383 182.287 15.5691 183.514 17.8308H184.073C184.694 16.7551 185.604 15.9208 186.804 15.3278C188.017 14.7348 189.382 14.4383 190.899 14.4383C193.52 14.4383 195.499 15.114 196.836 16.4655C198.188 17.8032 198.864 19.9546 198.864 22.9197V38H192.534V24.4918C192.534 22.8231 192.251 21.575 191.686 20.7476C191.134 19.9063 190.258 19.4857 189.058 19.4857C187.514 19.4857 186.355 20.0374 185.583 21.1406C184.825 22.2439 184.445 23.9953 184.445 26.395V38ZM90.2191 63.182H92.2877C94.3149 63.182 95.8113 62.8441 96.7766 62.1684C97.742 61.4926 98.2247 60.4307 98.2247 58.9827C98.2247 57.5484 97.7282 56.5279 96.7352 55.9211C95.7561 55.3143 94.2322 55.0109 92.1636 55.0109H90.2191V63.182ZM90.2191 68.395V80H83.8063V49.7566H92.6187C96.7284 49.7566 99.7692 50.5082 101.741 52.0114C103.713 53.5008 104.699 55.7694 104.699 58.8172C104.699 60.5962 104.21 62.1822 103.231 63.575C102.252 64.9541 100.866 66.0367 99.0728 66.8228C103.624 73.6217 106.589 78.0141 107.968 80H100.852L93.6323 68.395H90.2191ZM120.856 60.9272C119.518 60.9272 118.47 61.3547 117.711 62.2097C116.953 63.051 116.518 64.2508 116.408 65.8092H125.262C125.234 64.2508 124.827 63.051 124.041 62.2097C123.255 61.3547 122.193 60.9272 120.856 60.9272ZM121.745 80.4137C118.021 80.4137 115.112 79.3863 113.015 77.3315C110.919 75.2766 109.871 72.3667 109.871 68.6018C109.871 64.7266 110.836 61.734 112.767 59.624C114.712 57.5002 117.394 56.4383 120.814 56.4383C124.083 56.4383 126.627 57.3691 128.447 59.2309C130.268 61.0927 131.178 63.6647 131.178 66.9469V70.0085H116.263C116.332 71.8013 116.863 73.2011 117.856 74.2078C118.849 75.2146 120.242 75.7179 122.035 75.7179C123.428 75.7179 124.745 75.5731 125.986 75.2835C127.227 74.9939 128.523 74.5319 129.875 73.8975V78.7795C128.771 79.3311 127.592 79.738 126.337 80C125.082 80.2758 123.552 80.4137 121.745 80.4137ZM157.015 80H150.706V66.4918C150.706 64.8231 150.423 63.575 149.858 62.7476C149.306 61.9063 148.43 61.4857 147.231 61.4857C145.617 61.4857 144.445 62.0787 143.714 63.2648C142.983 64.4508 142.618 66.4022 142.618 69.119V80H136.308V56.8727H141.128L141.976 59.8308H142.328C142.949 58.7689 143.845 57.9415 145.017 57.3485C146.189 56.7417 147.534 56.4383 149.051 56.4383C152.513 56.4383 154.857 57.5691 156.084 59.8308H156.643C157.263 58.7551 158.174 57.9208 159.373 57.3278C160.587 56.7348 161.952 56.4383 163.469 56.4383C166.09 56.4383 168.069 57.114 169.406 58.4655C170.758 59.8032 171.434 61.9546 171.434 64.9197V80H165.104V66.4918C165.104 64.8231 164.821 63.575 164.255 62.7476C163.704 61.9063 162.828 61.4857 161.628 61.4857C160.084 61.4857 158.925 62.0374 158.153 63.1406C157.394 64.2439 157.015 65.9953 157.015 68.395V80ZM182.956 68.395C182.956 70.6843 183.328 72.415 184.073 73.5872C184.831 74.7595 186.059 75.3456 187.755 75.3456C189.438 75.3456 190.644 74.7664 191.375 73.6079C192.12 72.4357 192.492 70.698 192.492 68.395C192.492 66.1057 192.12 64.3887 191.375 63.2441C190.631 62.0994 189.41 61.5271 187.714 61.5271C186.031 61.5271 184.818 62.0994 184.073 63.2441C183.328 64.3749 182.956 66.0919 182.956 68.395ZM198.946 68.395C198.946 72.1599 197.954 75.1042 195.968 77.228C193.982 79.3518 191.217 80.4137 187.672 80.4137C185.452 80.4137 183.494 79.931 181.797 78.9657C180.101 77.9865 178.798 76.5868 177.888 74.7664C176.978 72.946 176.522 70.8222 176.522 68.395C176.522 64.6163 177.509 61.6788 179.481 59.5826C181.453 57.4864 184.225 56.4383 187.797 56.4383C190.017 56.4383 191.975 56.9209 193.671 57.8863C195.368 58.8517 196.671 60.2377 197.581 62.0443C198.491 63.8509 198.946 65.9678 198.946 68.395ZM213.903 75.3869C215.006 75.3869 216.33 75.1456 217.874 74.6629V79.3587C216.302 80.0621 214.372 80.4137 212.082 80.4137C209.559 80.4137 207.717 79.7793 206.559 78.5106C205.414 77.228 204.842 75.3111 204.842 72.7598V61.6098H201.822V58.9413L205.297 56.8313L207.118 51.9493H211.151V56.8727H217.626V61.6098H211.151V72.7598C211.151 73.6562 211.4 74.3182 211.896 74.7457C212.406 75.1732 213.075 75.3869 213.903 75.3869ZM232.148 60.9272C230.81 60.9272 229.762 61.3547 229.004 62.2097C228.245 63.051 227.811 64.2508 227.7 65.8092H236.554C236.527 64.2508 236.12 63.051 235.334 62.2097C234.548 61.3547 233.486 60.9272 232.148 60.9272ZM233.038 80.4137C229.314 80.4137 226.404 79.3863 224.308 77.3315C222.212 75.2766 221.164 72.3667 221.164 68.6018C221.164 64.7266 222.129 61.734 224.06 59.624C226.004 57.5002 228.687 56.4383 232.107 56.4383C235.375 56.4383 237.92 57.3691 239.74 59.2309C241.56 61.0927 242.471 63.6647 242.471 66.9469V70.0085H227.556C227.625 71.8013 228.156 73.2011 229.149 74.2078C230.141 75.2146 231.534 75.7179 233.327 75.7179C234.72 75.7179 236.037 75.5731 237.278 75.2835C238.519 74.9939 239.816 74.5319 241.167 73.8975V78.7795C240.064 79.3311 238.885 79.738 237.63 80C236.375 80.2758 234.844 80.4137 233.038 80.4137Z"
              fill="#FEFEFE"
            />
            <rect y="76.4918" width="62" height="3.71884" fill="#FEFEFE" />
            <rect y="57.0222" width="62" height="6.19807" fill="#FEFEFE" />
            <rect y="34" width="62" height="10" fill="#FEFEFE" />
            <rect y="8" width="62" height="13" fill="#FEFEFE" />
          </svg>
        </div>

        <form id="mobile-form">
          <h2>Username</h2>
          <input
            value={username}
            onChange={(e) => setUsername(e.target.value)}
          />

          <h2>Password</h2>
          <input
            value={password}
            onChange={(e) => setPassword(e.target.value)}
          />
          <button onClick={(event) => login(event)}>Login</button>
        </form>

        <form id="desktop-form">
        </form>
      </div>
    </div>
  );
};

export default LandingPage;
